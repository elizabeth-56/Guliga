<!DOCTYPE html>
<html lang="ml">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>‡¥ö‡µá‡µº‡¥§‡µç‡¥§ ‡¥ó‡µÅ‡¥≥‡¥ø‡¥ï ‡¥µ‡¥ø‡¥µ‡¥∞‡¥ô‡µç‡¥ô‡µæ</title>

<link href="https://fonts.googleapis.com/css2?family=Manjari:wght@400;700&display=swap" rel="stylesheet">

<style>
body {
    margin: 0;
    font-family: 'Manjari', sans-serif;
    background: #F4F9F9;
    padding: 20px;
}

h1 {
    text-align: center;
    font-size: 26px;
    margin-bottom: 20px;
}

.medicine-card {
    background: white;
    padding: 15px;
    border-radius: 15px;
    margin-bottom: 15px;
    box-shadow: 0 6px 15px rgba(0,0,0,0.08);
}

.medicine-card strong {
    font-size: 18px;
}

.delete-btn {
    background: #E63946;
    color: white;
    border: none;
    padding: 8px 14px;
    border-radius: 20px;
    margin-top: 8px;
    cursor: pointer;
}

.delete-btn:hover {
    background: #c82333;
}

.back-btn {
    width: 100%;
    padding: 14px;
    font-size: 18px;
    border: none;
    border-radius: 40px;
    background: #2A9D8F;
    color: white;
    margin-top: 20px;
    cursor: pointer;
}

.back-btn:hover {
    background: #21867A;
}
</style>
</head>

<body>

<h1>‡¥ö‡µá‡µº‡¥§‡µç‡¥§ ‡¥ó‡µÅ‡¥≥‡¥ø‡¥ï ‡¥µ‡¥ø‡¥µ‡¥∞‡¥ô‡µç‡¥ô‡µæ</h1>

<div id="medicineList">‡¥≤‡µã‡¥°‡µç ‡¥ö‡µÜ‡¥Ø‡µç‡¥Ø‡µÅ‡¥®‡µç‡¥®‡µÅ...</div>

<button class="back-btn" onclick="goBack()">‡¥§‡¥ø‡¥∞‡¥ø‡¥ï‡µÜ ‡¥™‡µã‡¥ï‡µÅ‡¥ï</button>

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

<script>
const supabaseUrl = "xntlnqkrdjguutmvlboe";
const supabaseKey = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InhudGxucWtyZGpndXV0bXZsYm9lIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzE2MDUzNjksImV4cCI6MjA4NzE4MTM2OX0.AE26NwidUiD52gOPe8pA4I6Mw7OaE9DRnnX69C07ELU";

const supabase = window.supabase.createClient(supabaseUrl, supabaseKey);

async function loadMedicines() {

    const { data, error } = await supabase
        .from("medicines")
        .select("*");

    if (error) {
        console.log(error);
        alert("‡¥°‡¥æ‡¥±‡µç‡¥± ‡¥≤‡¥≠‡µç‡¥Ø‡¥Æ‡¥≤‡µç‡¥≤ ‚ùå");
        return;
    }

    console.log(data); // see data in console

    const listDiv = document.getElementById("medicineList");
    listDiv.innerHTML = "";

    data.forEach(item => {
        listDiv.innerHTML += `
            <div>
                üíä ${item.medicine_name}<br>
                ‡¥∞‡µã‡¥ó‡¥Ç: ${item.disease_name}<br>
                ‡¥∏‡¥Æ‡¥Ø‡¥Ç: ${item.medicine_time}<br>
                ${item.food_type}<br><br>
            </div>
        `;
    });
}

loadMedicines();
</script>

</body>
</html>